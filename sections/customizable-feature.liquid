{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class='twcss:px-4 twcss:py-8 twcss:sm:px-6 twcss:lg:px-8 section-{{ section.id }}-padding page-width twcss:mx-auto color-{{ section.settings.color_scheme }} gradient'>
  <div class='twcss:md:max-w-[500px] {% if section.settings.text_alignment == 'left' %}twcss:text-left{% elsif section.settings.text_alignment == 'right' %}twcss:text-right{% else %}twcss:text-center{% endif %}'>
    <h2 class='twcss:text-4xl twcss:!font-bold twcss:tracking-tight twcss:sm:!text-6xl'>
      {{ section.settings.heading_prefix }}
      <span class='twcss:text-accent'>{{ section.settings.heading_emphasis }}</span>
      {{ section.settings.heading_suffix }}
    </h2>
    <p class='twcss:mt-4 twcss:!text-2xl'>
      {{ section.settings.subheading }}
    </p>
  </div>

  <div class='twcss:mt-16'>
    {% if section.settings.special_grid_type != 'none' %}
      <div
        class='twcss:grid twcss:grid-cols-1 twcss:gap-8 {% if section.settings.custom_grid != blank %}twcss:md:grid-cols-[{{ section.settings.custom_grid }}]{% else %}twcss:md:grid-cols-2{% endif %}'
      >
        {% for block in section.blocks %}
          {% if forloop.first %}
            <div {{ block.shopify_attributes }}>
              {% render 'feature-box', block: block, color_scheme: section.settings.color_scheme %}
            </div>
          {% elsif forloop.first == false and forloop.length <= 4 %}
            {% if forloop.index == 2 %}
              <div
                class='twcss:grid twcss:grid-cols-1 twcss:gap-8 {% if section.settings.special_grid_type == "1-2" %}twcss:md:grid-cols-2{% else %}twcss:md:grid-cols-1{% endif %}'
              >
            {% endif %}

            <div {{ block.shopify_attributes }}>
              {% render 'feature-box', block: block, color_scheme: section.settings.color_scheme %}
            </div>

            {% if forloop.last %}
              </div>
            {% endif %}
          {% endif %}
        {% endfor %}
      </div>
    {% else %}
      <div
        class='twcss:grid twcss:grid-cols-1 twcss:gap-8 {% if section.settings.layout_mode == "manual" %}twcss:md:grid-cols-[{{ section.settings.custom_grid }}]{% else %}{% if section.settings.columns == "1" %}twcss:md:grid-cols-1{% elsif section.settings.columns == "2" %}twcss:md:grid-cols-2{% elsif section.settings.columns == "3" %}twcss:md:grid-cols-3{% elsif section.settings.columns == "4" %}twcss:md:grid-cols-4{% endif %}{% endif %}'
      >
        {%- for block in section.blocks -%}
          <div {{ block.shopify_attributes }}>
            {% render 'feature-box', block: block, color_scheme: section.settings.color_scheme %}
          </div>
        {%- endfor -%}
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Feature with Image",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1"
    },
    {
      "type": "select",
      "id": "columns",
      "label": "Columns per row (standard)",
      "options": [
        {
          "value": "1",
          "label": "1 column"
        },
        {
          "value": "2",
          "label": "2 columns"
        },
        {
          "value": "3",
          "label": "3 columns"
        },
        {
          "value": "4",
          "label": "4 columns"
        }
      ],
      "default": "2"
    },
    {
      "type": "select",
      "id": "layout_mode",
      "label": "Layout Mode",
      "info": "Choose how to arrange the cards",
      "options": [
        {
          "value": "default",
          "label": "Use Columns (above)"
        },
        {
          "value": "manual",
          "label": "Manual grid"
        }
      ],
      "default": "default"
    },
    {
      "type": "select",
      "id": "special_grid_type",
      "label": "Special Grid Type",
      "info": "Special layouts for 3-4 cards",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "1-2",
          "label": "1 card left, 2 cards right"
        },
        {
          "value": "1-3",
          "label": "1 card left, 3 cards right"
        }
      ],
      "default": "none"
    },
    {
      "type": "text",
      "id": "custom_grid",
      "label": "Custom Grid Template Columns",
      "info": "E.g. '2fr 1fr 1fr' or '1fr 3fr' (used only when Layout Mode is Manual)",
      "default": "1fr 1fr"
    },
    {
      "type": "text",
      "id": "heading_prefix",
      "label": "Heading Prefix",
      "default": "Make forms"
    },
    {
      "type": "text",
      "id": "heading_emphasis",
      "label": "Heading Emphasis",
      "default": "uniquely"
    },
    {
      "type": "text",
      "id": "heading_suffix",
      "label": "Heading Suffix",
      "default": "yours"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Easily customize the design and layout to fit any form to your brand."
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "feature_box",
      "name": "Feature Box",
      "limit": 6,
      "settings": [
        {
          "type": "select",
          "id": "layout",
          "label": "Layout for this box",
          "options": [
            {
              "value": "one_column",
              "label": "Single Column"
            },
            {
              "value": "two_column",
              "label": "Two Columns"
            }
          ],
          "default": "two_column"
        },
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "checkmark",
              "label": "Checkmark"
            },
            {
              "value": "gift",
              "label": "Gift"
            },
            {
              "value": "truck",
              "label": "Truck"
            },
            {
              "value": "star",
              "label": "Star"
            },
            {
              "value": "heart",
              "label": "Heart"
            },
            {
              "value": "shop",
              "label": "Shop"
            },
            {
              "value": "clock",
              "label": "Clock"
            },
            {
              "value": "sparkles",
              "label": "Sparkles"
            }
          ],
          "default": "checkmark"
        },
        {
          "type": "text",
          "id": "box_heading",
          "label": "Box Heading",
          "default": "Customize your form"
        },
        {
          "type": "textarea",
          "id": "box_text",
          "label": "Box Text",
          "default": "Use our pre-made themes or create your own design by customizing colors, fonts, buttons, and more."
        },
        {
          "type": "checkbox",
          "id": "show_checklist",
          "label": "Show Checklist",
          "default": false
        },
        {
          "type": "text",
          "id": "check_1",
          "label": "Checklist Item 1"
        },
        {
          "type": "text",
          "id": "check_2",
          "label": "Checklist Item 2"
        },
        {
          "type": "text",
          "id": "check_3",
          "label": "Checklist Item 3"
        },
        {
          "type": "image_picker",
          "id": "box_image",
          "label": "Box Image"
        },
        {
          "type": "header",
          "content": "Button Settings"
        },
        {
          "type": "checkbox",
          "id": "show_button",
          "label": "Show Button",
          "default": false
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label",
          "default": "Learn More"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Button Style",
          "options": [
            {
              "value": "primary",
              "label": "Primary"
            },
            {
              "value": "secondary",
              "label": "Secondary"
            }
          ],
          "default": "primary"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Feature with Image",
      "blocks": [
        {
          "type": "feature_box"
        }
      ]
    }
  ]
}
{% endschema %}
