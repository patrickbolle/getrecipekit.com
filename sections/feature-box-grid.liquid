{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  {% if section.settings.custom_grid != 'none' and section.settings.columns != blank %}
    @media screen and (min-width: 768px) {
      .section-{{ section.id }}-grid {
        grid-template-columns: {{ section.settings.custom_grid }} !important;
      }
    }
  {% elsif section.settings.special_grid_type != 'none' %}
    @media screen and (min-width: 768px) {
      .section-{{ section.id }}-grid {
        grid-template-columns: {{ section.settings.custom_grid }} !important;
      }
    }
  {% endif %}

  @media screen and (min-width: 768px) {
    .header-{{ section.id }} {
      max-width: {{ section.settings.header_width }}%;
    }
  }
{%- endstyle -%}

<div class='twcss:px-4 twcss:py-8 twcss:sm:px-6 twcss:lg:px-8 section-{{ section.id }}-padding twcss:max-w-content twcss:mx-auto color-{{ section.settings.color_scheme }} gradient'>
  <div
    class='header-{{ section.id }} twcss:w-full {% if section.settings.text_alignment == 'left' %}twcss:text-left{% elsif section.settings.text_alignment == 'right' %}twcss:text-right twcss:ml-auto{% else %}twcss:text-center twcss:mx-auto{% endif %}'
  >
    <h2 class='twcss:!text-5xl twcss:!font-bold twcss:tracking-tight twcss:md:!text-6xl twcss:md:!leading-16'>
      {{ section.settings.heading_prefix }}
      <span class='twcss:text-accent'>{{ section.settings.heading_emphasis }}</span>
      {{ section.settings.heading_suffix }}
    </h2>
    <p class='twcss:mt-6 twcss:!text-2xl'>
      {{ section.settings.subheading }}
    </p>
  </div>

  <div class='twcss:mt-16'>
    {% if section.settings.special_grid_type == '1-left' %}
      <div
        class='twcss:grid twcss:md:grid-cols-2 twcss:gap-12 section-{{ section.id }}-grid'
      >
        {% for block in section.blocks %}
          {% if forloop.first %}
            <div {{ block.shopify_attributes }}>
              {% render 'feature-box', block: block, color_scheme: section.settings.color_scheme %}
            </div>
          {% elsif forloop.first == false and forloop.length <= 6 %}
            {% if forloop.index == 2 %}
              <div
                class='twcss:flex twcss:flex-col twcss:gap-12'
              >
            {% endif %}

            <div {{ block.shopify_attributes }}>
              {% render 'feature-box', block: block, color_scheme: section.settings.color_scheme %}
            </div>

            {% if forloop.last %}
              </div>
            {% endif %}
          {% endif %}
        {% endfor %}
      </div>
    {% elsif section.settings.special_grid_type == '1-right' %}
      <div
        class='twcss:grid twcss:md:grid-cols-2 twcss:gap-12 section-{{ section.id }}-grid'
      >
        <div class='twcss:flex twcss:flex-col twcss:gap-12'>
          {% for block in section.blocks %}
            {% unless forloop.first %}
              <div {{ block.shopify_attributes }}>
                {% render 'feature-box', block: block, color_scheme: section.settings.color_scheme %}
              </div>
            {% endunless %}
          {% endfor %}
        </div>

        {% for block in section.blocks %}
          {% if forloop.first %}
            <div {{ block.shopify_attributes }}>
              {% render 'feature-box', block: block, color_scheme: section.settings.color_scheme %}
            </div>
          {% endif %}
        {% endfor %}
      </div>
    {% else %}
      <div
        class='twcss:grid twcss:grid-cols-1 twcss:gap-12 {% if section.settings.columns == "1" %}twcss:md:grid-cols-1{% elsif section.settings.columns == "2" %}twcss:md:grid-cols-2{% elsif section.settings.columns == "3" %}twcss:md:grid-cols-3{% elsif section.settings.columns == "4" %}twcss:md:grid-cols-4{% endif %} section-{{ section.id }}-grid'
      >
        {%- for block in section.blocks -%}
          <div {{ block.shopify_attributes }}>
            {% render 'feature-box', block: block, color_scheme: section.settings.color_scheme %}
          </div>
        {%- endfor -%}
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Feature Box Grid",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1"
    },
    {
      "type": "header",
      "content": "Header Settings"
    },
    {
      "type": "range",
      "id": "header_width",
      "min": 20,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Header Width",
      "default": 60
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "text",
      "id": "heading_prefix",
      "label": "Heading Prefix",
      "default": "This is the"
    },
    {
      "type": "text",
      "id": "heading_emphasis",
      "label": "Heading Emphasis",
      "default": "emphasized part"
    },
    {
      "type": "text",
      "id": "heading_suffix",
      "label": "Heading Suffix",
      "default": "of the heading"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "This is the subheading text that appears below the main heading. It can be used to provide additional context or information."
    },
    {
      "type": "header",
      "content": "Grid Settings"
    },
    {
      "type": "select",
      "id": "special_grid_type",
      "label": "Special Grid Type",
      "info": "Special layouts for 3-4 cards",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "1-left",
          "label": "1 card left, other cards right"
        },
        {
          "value": "1-right",
          "label": "1 card right, other cards left"
        }
      ],
      "default": "none"
    },
    {
      "type": "select",
      "id": "columns",
      "label": "Columns per row",
      "info": "Used when Special Grid Type is set to None",
      "options": [
        {
          "value": "1",
          "label": "1 column"
        },
        {
          "value": "2",
          "label": "2 columns"
        },
        {
          "value": "3",
          "label": "3 columns"
        },
        {
          "value": "4",
          "label": "4 columns"
        }
      ],
      "default": "2"
    },
    {
      "type": "text",
      "id": "custom_grid",
      "label": "Custom Grid Template Columns",
      "info": "E.g. '2fr 1fr 1fr' or '1fr 3fr'. Overrides the Columns per row setting when Special Grid Type is None, or customizes the wrapper grid when using Special Grid Types. Enter 'none' to use default columns.",
      "default": "none"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "feature_box",
      "name": "Feature Box",
      "limit": 6,
      "settings": [
        {
          "type": "select",
          "id": "layout",
          "label": "Layout for this box",
          "options": [
            {
              "value": "one_column",
              "label": "Single Column"
            },
            {
              "value": "two_column",
              "label": "Two Columns"
            }
          ],
          "default": "two_column"
        },
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            {
              "value": "none",
              "label": "None"
            },

            {
              "value": "banknotes",
              "label": "Banknotes"
            },
            {
              "value": "beaker",
              "label": "Beaker"
            },
            {
              "value": "checkmark",
              "label": "Checkmark"
            },
            {
              "value": "clock",
              "label": "Clock"
            },
            {
              "value": "credit-card",
              "label": "Credit Card"
            },
            {
              "value": "fire",
              "label": "Fire"
            },
            {
              "value": "gift",
              "label": "Gift"
            },
            {
              "value": "heart",
              "label": "Heart"
            },
            {
              "value": "internet",
              "label": "Internet"
            },
            {
              "value": "light-bulb",
              "label": "Light Bulb"
            },

            {
              "value": "shop",
              "label": "Shop"
            },
            {
              "value": "sparkles",
              "label": "Sparkles"
            },
            {
              "value": "star",
              "label": "Star"
            },
            {
              "value": "truck",
              "label": "Truck"
            },
            {
              "value": "wrench",
              "label": "Wrench"
            }
          ],
          "default": "checkmark"
        },
        {
          "type": "text",
          "id": "box_heading",
          "label": "Box Heading",
          "default": "This is a feature box heading"
        },
        {
          "type": "textarea",
          "id": "box_text",
          "label": "Box Text",
          "default": "This is the main text content of the feature box. It can be used to describe features, benefits, or any other relevant information."
        },
        {
          "type": "checkbox",
          "id": "show_checklist",
          "label": "Show Checklist",
          "default": false
        },
        {
          "type": "text",
          "id": "check_1",
          "label": "Checklist Item 1",
          "default": "This is the first checklist item"
        },
        {
          "type": "text",
          "id": "check_2",
          "label": "Checklist Item 2",
          "default": "This is the second checklist item"
        },
        {
          "type": "text",
          "id": "check_3",
          "label": "Checklist Item 3",
          "default": "This is the third checklist item"
        },
        {
          "type": "image_picker",
          "id": "box_image",
          "label": "Box Image"
        },
        {
          "type": "select",
          "id": "image_aspect",
          "label": "Image Aspect Ratio",
          "options": [
            {
              "value": "square",
              "label": "Square (1:1)"
            },
            {
              "value": "landscape",
              "label": "Landscape (4:3)"
            },
            {
              "value": "wide",
              "label": "Wide (16:9)"
            },
            {
              "value": "portrait",
              "label": "Portrait (3:4)"
            },
            {
              "value": "tall",
              "label": "Tall (2:3)"
            }
          ],
          "default": "landscape"
        },
        {
          "type": "header",
          "content": "Button Settings"
        },
        {
          "type": "checkbox",
          "id": "show_button",
          "label": "Show Button",
          "default": false
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label",
          "default": "Click this button"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Button Style",
          "options": [
            {
              "value": "primary",
              "label": "Primary"
            },
            {
              "value": "secondary",
              "label": "Secondary"
            }
          ],
          "default": "primary"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Feature Box Grid",
      "blocks": [
        {
          "type": "feature_box"
        }
      ]
    }
  ]
}
{% endschema %}
