{% comment %}
  Schema.org FAQPage structured data (JSON-LD)

  Usage:
  {% render 'schema-faq', section: section %}

  This snippet generates FAQPage schema for any section with FAQ blocks.
  It automatically extracts questions and answers from the section blocks.
{% endcomment %}

{% if section.blocks.size > 0 %}
  {% assign faq_items = section.blocks | where: 'type', 'faq_item' %}

  {% if faq_items.size > 0 %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {%- for block in faq_items -%}
          {
            "@type": "Question",
            "name": {{ block.settings.question | json }},
            "acceptedAnswer": {
              "@type": "Answer",
              "text": {{ block.settings.answer | strip_html | json }}
            }
          }{% unless forloop.last %},{% endunless %}
        {%- endfor -%}
      ]
    }
    </script>
  {% endif %}
{% endif %}